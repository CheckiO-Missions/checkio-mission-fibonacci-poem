<body data-author="freeman_lex">
<div class="question-answer">
    <div class="question">
        Je n'ai aucune id√©e de la mani√®re de commencer √† r√©soudre cette mission.
    </div>
    <div class="answer">
        <p>
            üí° Soyez attentif - cette mission n'est pas tr√®s facile, tout comme la solution. L'id√©e g√©n√©rale est de cr√©er un it√©rateur avec des mots distincts √† partir de l'adresse <b class="code">text</b>. Ensuite, √† chaque √©tape, prenez un nombre n√©cessaire (nombre de Fibonacci actuel) de mots, jusqu'√† ce que l'it√©rateur soit √©puis√©. √Ä chaque √©tape, joignez les mots sur une ligne et joignez toutes les lignes pour obtenir un texte multiligne √† la fin.
        </p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Ok, par quoi dois-je commencer?
    </div>
    <div class="answer">
        <p>
            Avant d'√©crire la fonction, vous devez importer l'objet <b class="code">Iterator</b> du module <a target="_blank" href="https://docs.python.org/3/library/collections.abc.html">collections.abc</a>.
        </p>
        <pre class="brush: python">
from collections.abc import Iterator        
        </pre>
        <p>
            Maintenant, divisez l'objet <b class="code">text</b> en une s√©quence de mots distincts √† l'aide de la m√©thode <a target="_blank" href="https://www.w3schools.com/python/ref_string_split.asp">str.split()</a> avec le s√©parateur par d√©faut et cr√©ez un objet <a target="_blank" href="https://www.w3schools.com/python/python_iterators.asp">iterator</a> √† partir de la s√©quence.
        </p>
        <pre class="brush: python">
it = iter(text.split())
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        C'est clair! Que faire ensuite?
    </div>
    <div class="answer">
        <p>
            Imaginons ce que vous obtiendrez √† la fin. Vous aurez besoin d'une fonction suppl√©mentaire (par exemple <b class="code">gen</b>), qui prend l'it√©rateur <b class="code">it</b> comme argument et renvoie toutes les lignes jointes avec le nombre correct de mots. Votre fonction g√©n√©rale doit donc renvoyer ces lignes jointes avec le symbole de la nouvelle ligne. Utilisez la m√©thode <a target="_blank" href="https://www.w3schools.com/python/ref_string_join.asp">str.join()</a> avec <b class="code">\n</b> comme s√©parateur. 
        </p>
        <pre class="brush: python">
def gen(it: Iterator[str]) -> Iterator[str]:
    ...
it = iter(text.split())        
return "\n".join(gen(it))
        </pre>
        <p>Votre fonction <b class="code">gen</b> renvoie des lignes de mots jointes, le type de retour est donc √©galement <b class="code">Iterator</b>. Vous devez maintenant √©crire la fonction.</p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        C'est parti! Que doit-il y avoir?
    </div>
    <div class="answer">
        <p>
            Vous devez d√©clarer deux variables avec les √©l√©ments de d√©part de la progression de Fibonacci pour pouvoir calculer n'importe lequel de ses √©l√©ments suivants. 
        </p>
        <pre class="brush: python">
f0, f1 = 0, 1
        </pre>
        <p>
            Vous ne savez pas combien de temps vous allez recevoir des mots de <b class="code">it</b>, vous avez donc besoin de la boucle <a target="_blank" href="https://www.w3schools.com/python/python_while_loops.asp">while True</a> ici.
        </p>
        <pre class="brush: python">
while True:
    ...
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Comment cr√©er chaque ligne de mots?
    </div>
    <div class="answer">
        <p>
            D√©composons cette √©tape en plusieurs. √âvidemment, les mots de la ligne sont reli√©s entre eux par des espaces blancs.
        </p>
        <pre class="brush: python">
line = " ".join(...)
        </pre>
        <p>
            Que devez-vous joindre √† l'int√©rieur? Vous devez prendre l'√©l√©ment suivant sur <b class="code">it</b>, encore et encore. Si l'it√©rateur est √©puis√©, vous devez prendre "_". Ce texte est tr√®s court.
        </p>
        <pre class="brush: python">
line = " ".join(next(it, "_") ...)
        </pre>
        <p>
            Combien de mots devez-vous obtenir √† chaque fois? Puisque vous n'avez pas besoin de lignes vides, vous devriez commencer √† partir de <b class="code">f1</b> mots, ce qui est √©gal √† <b class="code">1</b> maintenant. Interrogez <b class="code">f1</b> avec now en l'assignant √† une variable.
        </p>
        <pre class="brush: python">
line = " ".join(next(it, "_") for _ in range(f1))
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Ouah! C'√©tait court et intelligent! Que dois-je faire ensuite?
    </div>
    <div class="answer">
        <p>
            √Ä un moment donn√©, lorsqu'il n'y aura plus de mots, vous obtiendrez la ligne qui commence d√©j√† par "_". Vous devez donc v√©rifier chaque ligne et interrompre la boucle dans ce cas. Vous pouvez utiliser la m√©thode <a target="_blank" href="https://www.w3schools.com/python/ref_string_startswith.asp">str.startswith()</a> avec l'argument <b class="code">_</b>.
        </p>
        <pre class="brush: python">
if line.startswith("_"):
    break
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Je vois. Comment poursuivre la boucle si la ligne contient toujours des mots?
    </div>
    <div class="answer">
        <p>
            Comme je l'ai dit pr√©c√©demment, votre fonction <b class="code">gen</b> est un g√©n√©rateur en soi, vous devez donc maintenant <a target="_blank" href="https://realpython.com/introduction-to-python-generators/">yield</a> votre ligne correcte hors de la fonction.
        </p>
        <pre class="brush: python">
yield line
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        N'ai-je pas besoin d'obtenir un nouveau nombre de Fibonacci?
    </div>
    <div class="answer">
        <p>
            Oui! Il ne reste plus qu'√† cr√©er un nouveau <b class="code">fo, f1</b> pour l'utiliser plus tard afin d'obtenir un plus grand nombre de mots √† partir de <b class="code">it</b>. Python facilite cette double t√¢che.
        </p>
        <pre class="brush: python">
f0, f1 = f1, f0 + f1
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Alors, √† quoi devrait ressembler ma solution finale?
    </div>
    <div class="answer">
        <p>
            Il vous suffit de combiner tous les indices et d'envelopper votre code dans une expression de fonction. Il est fortement recommand√© d'utiliser des indications de type pour les donn√©es d'entr√©e et de sortie.
        </p>
        <p>Voici la solution compl√®te:</p>
        <div class="spoiler">
        <pre class="brush: python">
from collections.abc import Iterator


def fibo_poem(text: str) -> str:

    def gen(it: Iterator[str]) -> Iterator[str]:
        
        f0, f1 = 0, 1
        while True:
            line = " ".join(next(it, "_") for _ in range(f1))
            if line.startswith("_"):
                break
            yield line
            f0, f1 = f1, f0 + f1

    it = iter(text.split())        
    return "\n".join(gen(it))
        </pre>
        </div>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Montrez-moi d'autres solutions!<br />
        parce que je veux √™tre une vraie ü•á Python Ninnjaa!
    </div>
    <div class="answer">
        <p>Bien s√ªr, prenez-le!</p>
        <p>
            Celui-ci est g√©n√©ralement le m√™me, mais avec le d√©coupage de liste au lieu de donner des valeurs √† partir d'it√©rateurs.
        </p>
        <div class="spoiler">
        <pre class="brush: python">
def fibo_poem(text: str) -> str:

    a, b, text, poem = 0, 1, text.split(), []
    while text:
        row, text = text[:b], text[b:]
        row.extend('_' * (b - len(row)))
        poem.append(' '.join(row))
        a, b = b, a + b
    return '\n'.join(poem)
        </pre>
        </div>
        <p>
            Celui-ci est encore plus court. Inversez la liste avec des mots et retirez des √©l√©ments √† partir de la fin jusqu'√† ce que la liste soit vide, puis prenez "_". Construisez ensuite de nouveaux nombres de Fibonacci et mettez √† jour le r√©sultat de la cha√Æne avec la nouvelle ligne jointe. Supprimez tous les espaces blancs inutiles et le symbole de la nouvelle ligne.
        </p>
        <div class="spoiler">
        <pre class="brush: python">
def fibo_poem(text: str) -> str:

    text, a, b, result = text.split()[::-1], 1, 1 , ""
    while text:
        line = (text and text.pop() or "_" for _ in range(b))
        a, b, result = a + b, a, result + ' '.join(line) + "\n"
    return result.strip()
        </pre>
        </div>
        <p>Cliquez sur <b>Best Solutions</b> dans le menu mission et d√©couvrez de nombreuses autres solutions int√©ressantes!</p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Merci beaucoup! J'en sais plus et je comprends mieux maintenant! Tout fonctionne bien!
    </div>
    <div class="answer">
        üëç Heureux de l'apprendre!
    </div>
</div>
</body>